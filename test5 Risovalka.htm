<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<meta name="author" content="admin" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<title>Обработка действий с мышью</title>
    <style>
        #pad {
            background:#def;
            border :1px solid #aaa;
        }
    </style>

</head>

<body>
    <canvas id='pad' width='480' height='320'></canvas>
    <script>
        canvas = $('#pad')[0]
//        document.write(<br>);

        document.write("<pre>");
        for(i = 0; i<canvas.length; i++)
        {
            document.write(canvas[i]);
        }
        document.write("</pre>");
        
        context = canvas.getContext("2d")
        pendown = false
        $('#pad').mousemove(function(event)
        {
            var xpos = event.pageX - canvas.offsetLeft
            var ypos = event.pageY - canvas.offsetTop
            
            if (pendown) 
                context.lineTo(xpos, ypos)
            else 
                context.moveTo(xpos, ypos)
                
            
            context.stroke()
        })
        $('#pad').mousedown(function() { pendown = true } )
        $('#pad').mouseup(function() { pendown = false } )
</script>
</body>
</html>